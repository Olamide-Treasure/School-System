<html lang="en-us">

    <head>
        <title>Student Info: {{student[0]['fname']}} {{student[0]['lname']}}</title>

        <!-- Bootstrap Code -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
  
        <!-- Project Files -->
        <!-- <link rel="stylesheet" type="text/css" href="/static/variables.css">
        <link rel="stylesheet" type="text/css" href="/static/base.css"> -->

        <!-- Font Imports -->
        <link href='https://fonts.googleapis.com/css?family=Cinzel' rel='stylesheet'>
        <link href='https://fonts.googleapis.com/css?family=PT Serif Caption' rel='stylesheet'>
    </head>


    <body>

        <nav class="navbar navbar-expand-md bg-body p-3 shadow-sm" id="nav">                
            <button class="navbar-toggler navbar-dark" type="button" data-toggle="collapse" data-target="#main-navigation">
                <span class="navbar-toggler-icon"></span>
            </button>


            <!-- Collapsable navbar for buttons -->
            <div class="collapse navbar-collapse" id="main-navigation">
                <ul class="navbar-nav">

                    <!-- All items on the navbar -->
                    <!-- Change links to other webpages -->
                    <li class="nav-item">
                        <a class="nav-link" href="{{url_for('home', id=student[0]['uni_id'])}}">Home</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/catalog">Catalog</a>
                    </li>
            
                    <li class="nav-item">
                        <a class="nav-link" href="{{url_for('register', id=student[0]['uni_id'])}}">Register</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/account">Account</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/logout">Logout</a>
                    </li>
                </ul>
            </div>
        </nav>

        <br>

        <div class="container mb-5">

            
            <div class="container">
                {% for category, message in get_flashed_messages(with_categories=true) %}
                    <div class="alert alert-dismissible alert-warning fade show mb-5" role="alert">
                        {{message}}
                        <button type="button" class="btn-close" aria-label="Close" data-dismiss="alert" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            </div>
     

            <div class="container mb-5">
                <div class="row">
                    <div class="col">
                        <h1>Hello {{student[0]['fname']}} {{student[0]['lname']}}!</h1>
                    </div>
                </div>

                <div class="row">
                    <div class="col-4">
                        <hr class="hr" />
                    </div>
                </div>
                

                <div class="row">
                    <div class="col-4">
                        <h5><small>Welcome to the student information page of our university! Here, you will 
                        find everything you need to know about your academic journey, all in one 
                        convenient location. From registering for classes to accessing important 
                        student resources, this page is designed to make your life as a student easier.</small></h5>
                    </div>
                </div>
            </div>



            <nav>
                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                    <button class="nav-link active" id="nav-info-tab" data-bs-toggle="tab" data-bs-target="#nav-info" type="button" role="tab" aria-controls="nav-info" aria-selected="true">Info</button>
                    <button class="nav-link" id="nav-schedule-tab" data-bs-toggle="tab" data-bs-target="#nav-schedule" type="button" role="tab" aria-controls="nav-schedule" aria-selected="false">Schedule</button>
                    <button class="nav-link" id="nav-edit-tab" data-bs-toggle="tab" data-bs-target="#nav-edit" type="button" role="tab" aria-controls="nav-edit" aria-selected="false">Edit</button>
                </div>
            </nav>


            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show active" id="nav-info" role="tabpanel" aria-labelledby="nav-info-tab">
                    
                   

                    <div class="container mt-3">
                        <div class="row mb-2">
                            <div class="col">
                                <h2>Student Info</h2>
                            </div>
                        </div>
                
                        <div class="row">
                            <div class="col-6">
                                <div class="container border py-2 h-100">
                                    <h3><strong>University Info</strong></h3>
                                    <h5><i>University ID</i>: {{student[0]['uni_id']}}</h5>
                                    <h5><i>Admitted Year</i>: {{student[0]['admit_year']}}</h5>
                                    {% if student[0]['stud_program'] == "master's" %}
                                        <h5><i>Program</i>: {{student[0]['stud_program']|capitalize}}</h5>
                                    {% else %}
                                        <h5><i>Program</i>: {{student[0]['stud_program']|upper}}</h5>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="container border py-2">
                                    <h3><strong>Personal Info</strong></h3>
                                    <h5><i>Full Name</i>: {{student[0]['fname']}} {{student[0]['lname']}}</h5>
                                    <h5><i>Birthday</i>: {{student[0]['bday']}}</h5>
                                    <h5><i>Address</i>: {{student[0]['user_address']}}</h5>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="tab-pane fade" id="nav-schedule" role="tabpanel" aria-labelledby="nav-schedule-tab">

                    <div class="container mt-3">
                        <div class="row mb-2">
                            <div class="col">
                                <h2>Class Info</h2>
                            </div>
                        </div>


                        {% for sem in semesters %}
                        <div class="row">
                            <div class="col">
                                <div class="table-responsive-md">
                                    <table class="table caption-top table-striped table-bordered w-75">
                                        
                                        <caption>{{sem['csem']}} {{sem['cyear']}}</caption>

                                        <thead>
                                            <tr>
                                                <th class="col-1">Course Department</th>
                                                <th class="col-1">Course Number</th>
                                                <th class="col-4">Course Name</th>
                                                <th class="col-1">Credits</th>
                                                <th class="col-1">Day</th>
                                                <th class="col-2">Time</th>
                                                <th class="col-1">Grade</th>
                                            </tr>
                                        </thead>
                                            
                                        <tbody>
                                            {% for row in schedule %}
                                                {% if row['csem'] == sem['csem'] and row['cyear'] == sem['cyear'] %}
                                                    <tr>
                                                        <td class="col-1">{{row['dname']}}</td>
                                                        <td class="col-1">{{row['cnum']}}</td>
                                                        <td class="col-4">{{row['title']}}</td>
                                                        <td class="col-1">{{row['credits']}}</td>
                                                        <td class="col-1">{{row['day_of_week']}}</td>
                                                        <td class="col-2">{{row['class_time']}}</td>
                                                        {% if row['grade'] %}
                                                            <td class="col-1">{{row['grade']}}</td>
                                                        {% else %}
                                                            <td class="col-1">IP</td>
                                                        {% endif %}
                                                            
                                                    </tr>
                                                {% endif %}
                    
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        {% endfor %}

                    </div>

                </div>
                <div class="tab-pane fade" id="nav-edit" role="tabpanel" aria-labelledby="nav-edit-tab">
                    <div class="container mt-3">
                        <div class="row mb-2">
                            <div class="col">
                                <h2>Update Personal Information</h2>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col">
                                <div class="container border py-2 h-100">
                                    <h3><strong>Birthday</strong></h3>
                                    <h5><i>Current Birthday</i>: {{student[0]['bday']}}</h5>
                                    <form action="/update_birthday" method="POST">
                                        <input type="date" name="birthday" id="birthday" placeholder="Change birthday"/>
                                        <input type="hidden" name="user_id" id="user_id" value="{{student[0]['uni_id']}}">
                                        <input type="submit" class="btn btn-sm btn-outline-secondary"/>
                                    </form>
                                </div>
                            </div>
                            <div class="col">
                                <div class="container border py-2 h-100">
                                    <h3><strong>Address</strong></h3>
                                    <h5><i>Current Address</i>: {{student[0]['user_address']}}</h5>
                                    <form action="/update_address" method="POST">
                                        <input name="address" id="address" placeholder="Change address"/>
                                        <input type="hidden" name="user_id" id="user_id" value="{{student[0]['uni_id']}}">
                                        <input type="submit" class="btn btn-sm btn-outline-secondary"/>
                                    </form>
                                </div>
                            </div>
                        </div>

                        
                        
                    </div>
                </div>
            </div>

              

            
            
            
        </div>


        
        
        

    </body>

</html>