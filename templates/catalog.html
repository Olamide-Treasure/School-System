<!--  CATALOG PAGE
      This page displays a dynamic list of all courses in the database. 
      It is allowed to be viewed by all user types, logged or guest.
-->
<html>
    <head>
        <title>Course Catalog</title>

        <!-- Bootstrap Code -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-5.3.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

        <link href="/static/catalog.css" rel="stylesheet" type="text/css">

    </head>

    <body>
        <img class="img-fluid" src="static/pattern1.svg" alt="">

        <!-- Navbar Code -->
        <nav class="navbar navbar-expand-md bg-body p-3 shadow-sm" id="nav">

            <!-- Edit this to inlclude logo link -->
            <a class="navbar-brand" href="/">Logo</a>

            <button class="navbar-toggler navbar-dark" type="button" data-toggle="collapse" data-target="#main-navigation">
                <span class="navbar-toggler-icon"></span>
            </button>


            <!-- Collapsable navbar for buttons -->
            <div class="collapse navbar-collapse" id="main-navigation">
                <ul class="navbar-nav">

                    <!-- All items on the navbar -->
                    <!-- Change links to other webpages -->
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/catalog">Catalog</a>
                    </li>

                    {% if logged %}
                        {% if session['type'] == "student" %}
                            <li class="nav-item">
                                <a class="nav-link" href="{{url_for('register', id='register')}}">Register</a>
                            </li>
                        {% endif %}

                        <li class="nav-item">
                            <a class="nav-link" href="/account">Account</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/logout">Logout</a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="/login">Sign In</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </nav>



        <!-- Title -->
        <div class="container-fluid my-5 h-50">
            <div class="container">

                <div class="overlay">

                </div>

                <div class="row h-100">
                    <div class="jumbotron-md h-100 bg-light rounded-3 p-5 shadow">
                        <h2 class="mb-3 display-2"><strong>Course Catalog</strong></h2>
                        <p class="lead">Welcome to our Engineering Course Catalog!</p>

                        <div class="container w-50 mx-0">
                            <h5 class="lead">  
                                <small>Our page provides information on a variety of engineering courses offered by our institution.
                                Here you will find details on each course's purpose, learning outcomes, prerequisites, and 
                                topics covered. Our diverse course offerings include everything from core engineering principles 
                                to cutting-edge topics in emerging technologies. Browse our catalog and find the perfect 
                                course to take your engineering skills to the next level.</small>
                            </h5>
                        </div>  
                    
                    </div>
        
                </div>
            </div>
        </div>          


        <!-- Courses -->
        <div class="container-fluid px-5">

            <div class="row">

                <div class="col-sm-2">

                    <div class="flex-shrink-0 pt-2 bg-white sticky-top">
                        
                        <h2 class="border-bottom">Courses</h2>
                        
                        <ul class="list-unstyled ps-0">
                            {% for row in dept %}
                            <li class="mb-1">
                                <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#{{row['dept_name']}}-collapse" aria-expanded="false">
                                    {{row['dept_name']}}
                                </button>
                                <div class="collapse" id="{{row['dept_name']}}-collapse">
                                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                        {% for row2 in course[row["dept_name"]] %}
                                        {% set full_title = row2["dept_name"] ~ " " ~ row2["course_num"] %}
                                            <div class="container-flex">
                                                <div class="row">
                                                    <div class="col-2"></div>
                                                    <div class="col-10">
                                                        <li><a class="rounded text-decoration-none" href="#{{row2['id']}}">{{full_title}}</a></li>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                
                <div class="col-md-10 pt-1 ">
                    {% for row in dept %}
                        <div class="container mb-5">
                            <div class="row mb-3">
                                <div class="container text-start d-flex flex-row align-items-end px-0">
                                    {% set name = None %}

                                    {% if row["dept_name"] == "CSCI" %}
                                        {% set name = "Computer Science" %}
                                    {% elif row["dept_name"] == "ECE" %}
                                        {% set name = "Electrical and Computer Engineering" %}
                                    {% elif row["dept_name"] == "MATH" %}
                                        {% set name = "Mathematics" %}
                                    {% endif %}

                                    <h1 class="mb-2 me-3"><strong>{{name}}</strong></h1>
                                
                                    <h5 class="mb-3">({{row["dept_name"]}})</h5>
                                </div>
                            </div>

                            {% for row2 in course[row["dept_name"]] %}
                                <div class="row">
                                    <div class="container-fluid text-start border pt-3 mb-2 shadow-sm" id='{{row2["id"]}}'>
    
                                        <div class="container mx-1 d-flex flex-row align-items-end">
                                            <h2 class="mb-2 me-3"><strong>{{row2["course_name"]}}</strong> - <small>{{row2["dept_name"]}} {{row2["course_num"]}}</small></h2>
                                        </div>
                                        
                                        <div class="container mx-1 mb-4">
                                            <h5>Credit Hours: {{row2['credit_hours']}}</h5>
                                            <h5>Prerequisites:
                                                {% for row3 in prereq %}
                                                    {% if row2['id'] == row3['course_id'] %}
                                                        <a class="text-decoration-none" href='#{{row3["prereq_"] ~ " " ~ row3["prereq_cnum"]}}'>{{row3['prereq_dname'] ~ " " ~ row3['prereq_cnum']}}</a>
                                                    {% endif %}
                                                {% endfor %}
                                            </h5>
                                        </div>
                
                
                                        <div class="container m-2 pb-4">
                                            <div class="row">
                
                                            <div class="col-6">
                                                <div class="container p-0">
                                                    [Class Description]
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="container">
                                                    [Bullet Points of Content]
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
        </div>
    
        <div class="container mb-3">
            <div class="row">
                <a href="#">Back To Top</a>
            </div>
        </div>
    </body>

</html>